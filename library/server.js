require("dotenv").config(); const express = require("express"); const mysql = require("mysql2"); const path = require("path"); const app = express(); app.use(express.json()); app.use(express.static(path.join(__dirname, "public"))); const db = mysql.createConnection({ host: process.env.MYSQLHOST, user: process.env.MYSQLUSER, password: process.env.MYSQLPASSWORD, database: process.env.MYSQLDATABASE, port: process.env.MYSQLPORT }); db.connect(err => { if (err) { console.error("DB CONNECTION FAILED:", err); } else { console.log("MySQL CONNECTED"); } }); // CREATE app.post("/books", (req, res) => { const { title, author } = req.body; db.query( "INSERT INTO books (title, author) VALUES (?, ?)", [title, author], err => { if (err) return res.status(500).json(err); res.json({ message: "Book added" }); } ); }); // READ app.get("/books", (req, res) => { db.query("SELECT * FROM books", (err, results) => { if (err) return res.status(500).json(err); res.json(results); }); }); // DELETE app.delete("/books/:id", (req, res) => { db.query( "DELETE FROM books WHERE id = ?", [req.params.id], err => { if (err) return res.status(500).json(err); res.json({ message: "Book deleted" }); } ); }); const PORT = process.env.PORT || 3000; app.listen(PORT, () => console.log("Server running on", PORT));